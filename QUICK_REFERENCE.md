# Quick Reference Card - Mistake Tracking Scripts

## 📋 Daily Workflow

### Today's Quiz (After Completion)
```bash
# Complete automated workflow
uv run scripts/process_quiz.py
```

### Review Yesterday
```bash
uv run scripts/show_mistakes_by_date.py
```

---

## 📅 Weekly Review

### Generate Last 7 Days Report
```bash
uv run scripts/weekly_mistakes_report.py
# or with details:
uv run scripts/weekly_mistakes_report.py --verbose
```

### Generate Last 14 Days
```bash
uv run scripts/weekly_mistakes_report.py --days 14 --verbose
```

---

## 🔍 Historical Lookup

### Specific Date
```bash
# Show only mistakes
uv run scripts/show_mistakes_by_date.py 2025-10-20

# Show all questions
uv run scripts/show_mistakes_by_date.py 2025-10-20 --all
```

### Specific Date Range
```bash
uv run scripts/weekly_mistakes_report.py --start 2025-10-14 --end 2025-10-20
```

---

## 💾 Update Historical Database

### From Weekly Report
```bash
uv run scripts/weekly_mistakes_report.py --days 14 --update-history --verbose
```

### From Specific Range
```bash
uv run scripts/weekly_mistakes_report.py \
  --start 2025-10-01 \
  --end 2025-10-20 \
  --update-history
```

---

## 📊 Report Types

| Script | What It Does | Best For |
|--------|--------------|----------|
| `show_mistakes_by_date.py` | Single day mistakes | Quick daily review |
| `weekly_mistakes_report.py` | Multi-day comprehensive report | Weekly analysis, trends |
| `process_quiz.py` | Parse today's quiz | Daily workflow |
| `track_mistakes.py` | Extract mistakes from parsed results | Manual tracking |
| `accumulate_mistakes.py` | Add to historical database | Build history |

---

## 📁 Output Files

| File | Description | Generated By |
|------|-------------|--------------|
| `output/reports/WEEKLY_MISTAKES_REPORT.md` | Weekly report (default) | `weekly_mistakes_report.py` |
| `data/results/defi_du_jour_results.json` | Today's parsed results | `parse_results.py` |
| `data/results/mistakes_history.json` | All historical mistakes | `accumulate_mistakes.py` |
| `output/reports/mistakes_log.md` | All mistakes (readable) | `accumulate_mistakes.py` |
| `output/reports/mistakes_by_category.md` | Mistakes by category | `accumulate_mistakes.py` |
| `output/results/player_scores_evolution.csv` | Player score evolution | `player_evolution.py` |

---

## ⚙️ Common Options

### Date Formats (show_mistakes_by_date.py)
```bash
uv run scripts/show_mistakes_by_date.py 2025-10-20   # YYYY-MM-DD
uv run scripts/show_mistakes_by_date.py 2025/10/20   # YYYY/MM/DD
uv run scripts/show_mistakes_by_date.py 20/10/2025   # DD/MM/YYYY
uv run scripts/show_mistakes_by_date.py              # Yesterday (default)
```

### Date Ranges (weekly_mistakes_report.py)
```bash
# By number of days
--days 7            # Last 7 days
--days 14           # Last 14 days
--days 30           # Last 30 days

# By specific dates
--start 2025-10-14              # From date to yesterday
--end 2025-10-20                # Last 7 days to date
--start 2025-10-14 --end 2025-10-20  # Specific range
```

### Output Options
```bash
--output FILENAME.md    # Custom output filename
--verbose               # Show progress
--update-history        # Update mistakes_history.json
--all                   # Show all questions (not just mistakes)
--save FILENAME.html    # Save HTML (show_mistakes_by_date.py only)
--no-auth               # Skip authentication (limited data)
--no-cache              # Force fresh fetch (ignore cache)
```

---

## 💾 Caching System

**Both scripts use smart caching to avoid re-downloading:**

- **Cache location:** `data/cache/quiz_html/YYYY-MM-DD.html`
- **First run:** Downloads from server and saves to cache
- **Subsequent runs:** Loads instantly from cache
- **Benefits:** Faster, server-friendly, offline-capable

### Cache Behavior

```bash
# First time - downloads and caches
uv run scripts/show_mistakes_by_date.py 2025-10-20
# Output: 🌐 Fetching archive page from server...
#         💾 Cached for future use

# Second time - loads from cache
uv run scripts/show_mistakes_by_date.py 2025-10-20
# Output: 📂 Loaded from cache (444829 bytes)

# Force fresh fetch (bypass cache)
uv run scripts/show_mistakes_by_date.py 2025-10-20 --no-cache
```

### Weekly Report with Cache

```bash
# First run - fetches and caches all days
uv run scripts/weekly_mistakes_report.py --days 7 --verbose
# Output:   Fetching 2025-10-14... ✓ (11/20)
#           Fetching 2025-10-15... ✓ (11/20)
#           ...

# Second run - uses cache for already-fetched days
uv run scripts/weekly_mistakes_report.py --days 7 --verbose
# Output:   Fetching 2025-10-14... (cached) ✓ (11/20)
#           Fetching 2025-10-15... (cached) ✓ (11/20)
#           ...
```

---

## 🎯 Common Scenarios

### Scenario: Just finished today's quiz
```bash
uv run scripts/process_quiz.py
```

### Scenario: Want to review last week
```bash
uv run scripts/weekly_mistakes_report.py
```

### Scenario: Missed several days, need to catch up
```bash
uv run scripts/weekly_mistakes_report.py --days 14 --update-history --verbose
```

### Scenario: Check a specific past quiz
```bash
uv run scripts/show_mistakes_by_date.py 2025-10-15
```

### Scenario: Preparing for a test, need study material
```bash
uv run scripts/weekly_mistakes_report.py --days 30 --output STUDY_GUIDE.md
```

### Scenario: Compare two periods
```bash
uv run scripts/weekly_mistakes_report.py --start 2025-10-01 --end 2025-10-07 --output week1.md
uv run scripts/weekly_mistakes_report.py --start 2025-10-08 --end 2025-10-14 --output week2.md
```

---

## 🔧 Prerequisites

### Required: .env file
```env
QUIZY_USER=your.email@example.com
QUIZY_PASS=yourpassword
# OR (faster)
QUIZY_COOKIE=wordpress_logged_in_xxxxx=value; other=value
```

### Required: UV installed
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

---

## 💡 Pro Tips

1. **Weekly Habit:** Run weekly report every Monday morning
2. **Use --verbose:** See progress for long date ranges
3. **Save Reports:** Use dated filenames for comparison
4. **Focus on Categories:** Use category breakdown to study
5. **Automate:** Set up cron jobs for regular reports

---

## 🆘 Troubleshooting

| Problem | Solution |
|---------|----------|
| Authentication failed | Check `.env` credentials |
| No data for a date | You may not have completed that quiz |
| DC_DATA not found | Date might be too old or authentication issue |
| Slow fetching | Normal - respects rate limits (~0.5s per day) |

---

## 📚 Full Documentation

- **Single Day:** `docs/SHOW_MISTAKES_BY_DATE.md`
- **Weekly Report:** `docs/WEEKLY_MISTAKES_REPORT.md`
- **Complete Workflow:** `docs/COMPLETE_WORKFLOW.md`
- **Main README:** `README.md`

---

## 🔗 Quick Links

```bash
# Help for any script
uv run scripts/show_mistakes_by_date.py --help
uv run scripts/weekly_mistakes_report.py --help

# View reports
cat WEEKLY_MISTAKES_REPORT.md
cat mistakes_log.md
```

---

**Last Updated:** October 21, 2025
**Version:** 1.0

*Keep this card handy for quick reference!* 📌
